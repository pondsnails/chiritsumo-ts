# 開発時のPro版機能テスト方法

開発環境でPro版の機能をテストする方法を説明します。

## 方法1: 設定画面でトグル切り替え（推奨）

1. アプリを起動（開発モード）
2. 設定タブを開く
3. 一番下の「🔧 開発者ツール」セクションが表示される
4. 「課金ステータス切り替え」カードをタップ
5. Pro版/Free版が即座に切り替わる

### メリット
- アプリを再起動せずに切り替え可能
- 現在のステータスが一目で分かる
- 設定が保持される

## 方法2: コード内でデフォルト設定（常時Pro版として起動）

`core/store/subscriptionStore.ts`の先頭で設定：

```typescript
const DEV_FORCE_PRO = true; // falseの場合はFree版
```

### メリット
- アプリ起動時から常にPro版として動作
- 毎回切り替える必要がない

### デメリット
- Free版のテストには再度変更が必要
- コミット時に戻し忘れに注意

## Pro版とFree版の違い

### Free版の制限
- 参考書登録: 3冊まで
- Lexプロファイル: 基本プリセットのみ
- 借金リセット時のストリーク保持: 不可

### Pro版の機能
- 参考書登録: 無制限
- Lexプロファイル: 全プリセット利用可能
- カスタムLex目標設定
- 借金リセット時のストリーク保持

## 注意事項

⚠️ **本番ビルドでは開発者ツールは表示されません**
- `process.env.NODE_ENV === 'development'`でチェック
- 本番では常に実際の課金状態が使用されます

⚠️ **RevenueCat連携について**
- 開発時は`DEV_FORCE_PRO`または手動切り替えで動作確認
- 本番ではRevenueCatの実際の課金状態を取得

## 開発フロー例

```bash
# 1. 開発サーバー起動
npm run dev

# 2. アプリで設定タブを開く

# 3. 開発者ツールでPro版に切り替え

# 4. Pro版限定機能をテスト
#    - 4冊目以降の参考書追加
#    - カスタムLex目標設定
#    - 高負荷プロファイルの選択

# 5. Free版に切り替えて制限をテスト
#    - 4冊目追加時のエラー
#    - Pro限定プロファイルの非表示

# 6. テスト完了後は元に戻す
```

## トラブルシューティング

### 開発者ツールが表示されない
- `process.env.NODE_ENV`が`development`になっているか確認
- Metro Bundlerを再起動してキャッシュクリア

### 切り替えが反映されない
- 画面を一度離れて戻ってくる
- アプリを再起動

### 本番ビルドに開発コードが残っている
- `__DEV__`チェックが正しく機能しているか確認
- 本番ビルド時は`NODE_ENV=production`になっているか確認
